<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Welcome!</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
    }
    header {
      background-image: url("images/doralacademy.png");
      background-repeat: no-repeat;
      background-size: auto;
      color: white;
      padding: 30px 0;
      font-size: 40px;
      font-weight: bold;
      text-align: center;
    }
    .search-container {
      margin: 20px;
      text-align: center;
    }
    input[type="text"] {
      padding: 10px;
      width: 50%;
      font-size: 18px;
    }
    .audio-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin: 20px;
    }
    .audio-item {
      width: 320px;
      background: #2a9d8f; /* teal */
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    .audio-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .player-controls {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    /* Play button (triangle) */
    .play-btn {
      width: 0;
      height: 0;
      border-left: 25px solid black;
      border-top: 15px solid transparent;
      border-bottom: 15px solid transparent;
      cursor: pointer;
      margin-right: 10px;
    }
    /* Pause button (two bars) */
    .pause-btn {
      width: 20px;
      height: 25px;
      display: flex;
      justify-content: space-between;
      cursor: pointer;
      margin-right: 10px;
    }
    .pause-btn div {
      background: black;
      width: 7px;
      height: 100%;
    }
    .progress-container {
      flex: 1;
      height: 15px;
      background: black;
      border-radius: 10px;
      cursor: pointer;
      margin: 0 10px;
      position: relative;
    }
    .progress {
      height: 100%;
      width: 0%;
      background: white;
      border-radius: 10px;
    }
    .time-display {
      font-size: 14px;
      min-width: 80px;
      text-align: right;
    }
  </style>
</head>
<body>
  <header>Welcome!</header>
  
  <div class="search-container">
    <input type="text" id="searchBar" placeholder="Search audios...">
  </div>
  
  <div class="audio-list" id="audioList"></div>
  
  <script>
    // List of audios (name + file path)
    const audios = [
      { name: "jess and juan", file: "audio/jess-and-juan.mp3" },
      { name: "jessica and frank", file: "audio/jessica-and-frank.mp3" },
      { name: "mike and sara", file: "audio/mike-and-sara.mp3" },
      { name: "alex and jess", file: "audio/alex-and-jess.mp3" }
    ];

    const audioList = document.getElementById("audioList");
    const searchBar = document.getElementById("searchBar");

    // Format time helper
    function formatTime(seconds) {
      if (isNaN(seconds)) return "0:00";
      const m = Math.floor(seconds / 60);
      const s = Math.floor(seconds % 60);
      return m + ":" + (s < 10 ? "0" + s : s);
    }

    // Function to display audios
    function displayAudios(filter = "") {
      audioList.innerHTML = "";
      const search = filter.trim().toLowerCase(); // remove spaces
      audios.forEach((audio, index) => {
        if (audio.name.toLowerCase().includes(search)) {
          const div = document.createElement("div");
          div.className = "audio-item";
          div.innerHTML = `
            <div class="audio-title">${audio.name}</div>
            <div class="player-controls">
              <div class="play-btn" id="play-btn-${index}" data-index="${index}"></div>
              <div class="progress-container" data-index="${index}">
                <div class="progress" id="progress-${index}"></div>
              </div>
              <div class="time-display" id="time-${index}">0:00 / 0:00</div>
            </div>
            <audio id="audio-${index}" src="${audio.file}"></audio>
          `;
          audioList.appendChild(div);
        }
      });

      // Add functionality
      document.querySelectorAll(".play-btn, .pause-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const index = btn.getAttribute("data-index");
          const audio = document.getElementById("audio-" + index);
          const playBtn = document.getElementById("play-btn-" + index);
          const timeDisplay = document.getElementById("time-" + index);

          // Pause all other audios and reset buttons
          document.querySelectorAll("audio").forEach((a, i) => {
            if (i != index) {
              a.pause();
              const otherBtn = document.getElementById("play-btn-" + i);
              if (otherBtn) {
                otherBtn.className = "play-btn";
                otherBtn.innerHTML = "";
              }
            }
          });

          if (audio.paused) {
            audio.play();
            // Change to pause button
            playBtn.className = "pause-btn";
            playBtn.innerHTML = "<div></div><div></div>";
          } else {
            audio.pause();
            // Change back to play triangle
            playBtn.className = "play-btn";
            playBtn.innerHTML = "";
          }

          // Update progress + time
          audio.ontimeupdate = () => {
            const progress = document.getElementById("progress-" + index);
            progress.style.width = (audio.currentTime / audio.duration) * 100 + "%";
            timeDisplay.textContent = formatTime(audio.currentTime) + " / " + formatTime(audio.duration);
          };

          // Set duration once loaded
          audio.onloadedmetadata = () => {
            timeDisplay.textContent = "0:00 / " + formatTime(audio.duration);
          };

          // Click to seek
          document.querySelectorAll(".progress-container").forEach(bar => {
            bar.addEventListener("click", e => {
              const barIndex = bar.getAttribute("data-index");
              const audioBar = document.getElementById("audio-" + barIndex);
              const rect = bar.getBoundingClientRect();
              const clickX = e.clientX - rect.left;
              const width = rect.width;
              audioBar.currentTime = (clickX / width) * audioBar.duration;
            });
          });

          // When audio ends, reset button
          audio.onended = () => {
            playBtn.className = "play-btn";
            playBtn.innerHTML = "";
            timeDisplay.textContent = "0:00 / " + formatTime(audio.duration);
          };
        });
      });
    }

    // Initial load
    displayAudios();

    // Search functionality
    searchBar.addEventListener("input", () => {
      displayAudios(searchBar.value);
    });
  </script>
</body>
</html>
